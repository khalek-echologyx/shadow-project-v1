(()=>{function e(t,n,o=!1,a=1e4,i=25){a<0||(t()?n():setTimeout((()=>{e(t,n,o,o?a:a-i,i)}),i))}function t(e,t,n={}){const{root:o=document.documentElement,timeout:a=1e4}=n,i=document.querySelector(e);if(i)return void t(i);const l=new MutationObserver((()=>{const n=document.querySelector(e);n&&(l.disconnect(),t(n))}));l.observe(o,{childList:!0,subtree:!0}),a&&setTimeout((()=>l.disconnect()),a)}function n(){const e=".promo-items",n=".view-phone-details",o=".promo-item-img-group";function a(e){const t=document.querySelector(o);t&&e.promoState.length&&(t.innerHTML=function(e){if(!Array.isArray(e)||e.length<=2)return"";const t=e.slice(2).filter((e=>e.image)),n=t.slice(0,3),o=t.length-n.length;let a="";return n.forEach((e=>{e.image&&(a+=`<img class="promo-item-img" src="${e.image}" alt="" loading="lazy">`)})),o>0&&(a+=`<span class="promo-more-count">+${o}</span>`),a}(e.promoState))}function i(){const e='\n        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">\n          <rect x="1" y="1" width="22" height="22" rx="11" fill="white"/>\n          <rect x="1" y="1" width="22" height="22" rx="11" stroke="#00539F" stroke-width="2"/>\n          <path d="M17.2287 8.35382L12.0005 13.7705L6.77751 8.35407L5.69775 9.39528L12.0001 15.9309L18.3079 9.39553L17.2287 8.35382Z" fill="#00539F"/>\n        </svg>',t=document.querySelectorAll(".custom-sidebar-accordion");t.length&&(t.forEach((t=>{t.querySelector(".custom-sidebar-accordion-icon").innerHTML=e})),t.forEach((n=>{const o=n.querySelector(".custom-sidebar-accordion-header"),a=n.querySelector(".cust-sidebar-accordion-content"),i=n.querySelector(".custom-sidebar-accordion-icon");o.addEventListener("click",(()=>{const o=n.classList.contains("_open");t.forEach((t=>{t.classList.remove("_open"),t.querySelector(".cust-sidebar-accordion-content").style.maxHeight=null,t.querySelector(".custom-sidebar-accordion-icon").innerHTML=e})),o||(n.classList.add("_open"),a.style.maxHeight=a.scrollHeight+"px",i.innerHTML='\n        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">\n          <rect x="1" y="1" width="22" height="22" rx="11" fill="white"/>\n          <rect x="1" y="1" width="22" height="22" rx="11" stroke="#00539F" stroke-width="2"/>\n          <path d="M18.3026 14.6047L12.0003 8.06909L5.69238 14.6044L6.77166 15.6462L11.9998 10.2295L17.2228 15.6459L18.3026 14.6047Z" fill="#00539F"/>\n        </svg>')}))})))}function l(e){if(!e.accrodionState)return"";let t="";return e.accrodionState.forEach((e=>{t+=`\n        <div class="custom-sidebar-accordion">\n          <div class="custom-sidebar-accordion-header" data-accordion-header>\n            <span class="custom-sidebar-accordion-title">${e.title}</span>\n            <span class="custom-sidebar-accordion-icon">\n              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">\n                <rect x="1" y="1" width="22" height="22" rx="11" fill="white"/>\n                <rect x="1" y="1" width="22" height="22" rx="11" stroke="#00539F" stroke-width="2"/>\n                <path d="M17.2287 8.35382L12.0005 13.7705L6.77751 8.35407L5.69775 9.39528L12.0001 15.9309L18.3079 9.39553L17.2287 8.35382Z" fill="#00539F"/>\n              </svg>\n            </span>\n          </div>\n          <div class="cust-sidebar-accordion-content">\n            <div class="custom-sidebar-accordion-content-inner">\n              <p class="custom-sidebar-accordion-content-text">${e.content}</p>\n            </div>\n          </div>\n        </div>`})),t}function r(e="apple"){const t=document.getElementById("promo-custom-sidebar"),n=document.querySelector("[data-promo-backdrop]"),o=document.querySelector(".modals-wrapper"),a=document.querySelector(".custom-sidebar-content");t&&n&&o&&a&&("apple"===e?(a.innerHTML=`\n            <h2>Get 3 months free when you buy any iPhone.</h2>\n            <div class="custom-sidebar-accordion-section">\n              ${l(c)}\n            </div>\n            `,i()):"roaming"===e?a.innerHTML=c.roaming:"frozenPrice"===e&&(a.innerHTML=c.frozenPrice),document.querySelector(".modals-overlay")||o.insertAdjacentHTML("beforebegin",'<div class="modals-overlay" style="z-index: 901;"></div>'),document.body.classList.add("_has-modal"),t.classList.add("_show"),t.style.zIndex="902")}function s(){const e=document.getElementById("promo-custom-sidebar");if(!e||!e.classList.contains("_show"))return;const t=document.querySelector("[data-promo-backdrop]"),n=document.querySelector(".modals-wrapper");if(!e||!t||!n)return;const o=document.querySelector(".modals-overlay");o&&o.remove(),document.body.classList.remove("_has-modal"),e.classList.remove("_show")}document.body.addEventListener("click",(e=>{e.target.closest(".modals-overlay")&&s()}));const c={promoState:[],accrodionState:[{title:"Apple TV+",content:"Eligible Handsets:\niPhone 17\niPhone 17 Pro\niPhone 17 Pro Max\niPhone Air\niPhone 16 with Apple iPad A16\niPhone 16e\niPhone 16 Pro Max\niPhone 16 Pro Max with Apple Watch Series 10\niPhone 16 Pro\niPhone 16 Plus\niPhone 16\niPhone 15 Pro Max\niPhone 15\niPhone 14\niPhone 13\n\nHow to claim 3 months of Apple TV+\n\nTurn on your new iPhone and sign in with your Apple ID.\nOpen the Apple TV app. Make sure your eligible device is running the latest version of iOS, iPad OS, tvOS, or macOS.\nThe offer should appear immediately after you launch the Apple TV app. If not, scroll down in Watch Now until the offer appears.\nTap Enjoy 3 months Free. You might be asked to enter your Apple ID password, confirm your billing information, or add a valid payment method.\nNew subscribers get three months of Apple News+ free when you buy a new iPhone, subject to the terms and conditions.\n\nClick Here for Full Terms & Conditions.\n\n£9.99/month after free trial. One subscription per Family Sharing group. Offer good for 3 months after eligible device activation. Plan automatically renews until cancelled. Restrictions and other terms apply. See apple.com/uk/promo for more information."},{title:"Apple Music",content:"Eligible Handsets:\niPhone 17\niPhone 17 Pro\niPhone 17 Pro Max\niPhone Air\niPhone 16 with Apple iPad A16\niPhone 16e\niPhone 16 Pro Max\niPhone 16 Pro Max with Apple Watch Series 10\niPhone 16 Pro\niPhone 16 Plus\niPhone 16\niPhone 15 Pro Max\niPhone 15\niPhone 14\niPhone 13\n\nHow to claim 3 months of Apple TV+\n\nTurn on your new iPhone and sign in with your Apple ID.\nOpen the Apple TV app. Make sure your eligible device is running the latest version of iOS, iPad OS, tvOS, or macOS.\nThe offer should appear immediately after you launch the Apple TV app. If not, scroll down in Watch Now until the offer appears.\nTap Enjoy 3 months Free. You might be asked to enter your Apple ID password, confirm your billing information, or add a valid payment method.\nNew subscribers get three months of Apple News+ free when you buy a new iPhone, subject to the terms and conditions.\n\nClick Here for Full Terms & Conditions.\n\n£9.99/month after free trial. One subscription per Family Sharing group. Offer good for 3 months after eligible device activation. Plan automatically renews until cancelled. Restrictions and other terms apply. See apple.com/uk/promo for more information."},{title:"Apple Fintess +",content:"Claim 3 months of Apple Fitness+ free\n                    Get 3 months of Apple Fitness+ free, when you purchase any iPhone. Claim your 3 months free Apple Fitness+ subscription in the Apple Fitness+ app on your iPhone within 3 months after first activating your Eligible Device.\n                    Eligible Handsets:\n                    iPhone 17\n                    iPhone 17 Pro\n                    iPhone 17 Pro Max\n                    iPhone Air\n                    iPhone 16 with Apple iPad A16\n                    iPhone 16eiPhone 16 Pro MaxiPhone 16 Pro Max with Apple Watch Series 10iPhone 16 ProiPhone 16 PlusiPhone 16iPhone 15 Pro MaxiPhone 15iPhone 14iPhone 13\n                    How to claim 3 months of Apple Fitness+ free\n                    Open the Apple Fitness+ app. Tap Enjoy 3 months Free. You might be asked to enter your Apple ID password, confirm your billing information, or add a valid payment method.\n                    Subscribing to Apple Fitness+ requires an iPhone 8 or later, or Apple Watch Series 3 or later paired with an iPhone 6s or later. Apple Fitness+ is only available in select regions.\n                    New subscribers get three months of Apple Fitness+ free when you buy a new eligible Apple iPhone, subject to the terms and conditions.\n                  Click Here for Full Terms & Conditions."},{title:"Apple Arcade",content:"'Enjoy unlimited access to over 200 incredibly fun games, including Arcade Originals, App Store Greats, and Timeless Classics, with no ads and no in-app purchases. Up to six people can play across their Apple devices.¹ Try it free on the App Store.²\nEligible Handsets:\niPhone 17iPhone 17 ProiPhone 17 Pro MaxiPhone AiriPhone 16 with Apple iPad A16\niPhone 16eiPhone 16 Pro MaxiPhone 16 Pro Max with Apple Watch Series 10iPhone 16 ProiPhone 16 PlusiPhone 16iPhone 15 Pro MaxiPhone 15iPhone 14iPhone 13\nOffer ends 90 days after your device activation\n*£6.99/month after free trial. Only one offer per Apple ID and only one offer per family if you’re part of a Family Sharing group, regardless of the number of devices you or your family purchase. Offer good for 3 months after eligible device activation. Plan automatically renews until cancelled. Restrictions and other terms apply.¹Requires iCloud Family Sharing. See apple.com/family-sharing for more information.²New subscribers only. £6.99/month after trial. The plan automatically renews after the trial until cancelled. Terms apply.'"},{title:"Apple News +",content:"Get 3 months of AppleNews+ when you purchase any Apple device. Claim your 3 months free Apple News+ subscription in the Apple News app.\nEligible Handsets:\niPhone 17\niPhone 17 Pro\niPhone 17 Pro Max\niPhone Air\niPhone 16 with Apple iPad A16\niPhone 16eiPhone 16 Pro MaxiPhone 16 Pro Max with Apple Watch Series 10iPhone 16 ProiPhone 16 PlusiPhone 16iPhone 15 Pro MaxiPhone 15iPhone 14iPhone 13Offer must be claimed in the Apple News app within 3 months after first activating your Eligible Device. To see the offer appear, you will need to sign in with your Apple ID on your Eligible Device.Click Here for Full Terms & Conditions.How to claim 3 months of Apple News+:\n\nOpen the News app.\nTouch, tap News+ at the bottom of the screen.\nTap or click the trial subscription offer. One trial per Apple ID.\nIf asked, sign in with the Apple ID that you use for App Store and iTunes Store purchases. If you don't have an Apple ID, follow the prompts to create one. Find out what to do if you've forgotten your Apple ID or you're not sure whether you have one.\nIf asked, confirm your billing information. You may need to add a valid payment method.\nIf asked, agree to the terms and conditions.\n"}],roaming:'<div data-content-type="text" data-appearance="default" data-element="main"><p>Join Tesco Mobile and take your UK data, minutes and texts with you to 48 destinations across the EU and beyond – at no extra cost – with Home From Home. Whether you’re sharing pics in Paris or using maps in Madrid, you’ll stay connected. No setup, no stress, no scary bills – just roam like you’re at home.&nbsp;</p>\n<p>To check how much it costs to use your phone in a specific destination, including our rest of the world destinations, you can use our <a tabindex="0" href="https://www.tescomobile.com/roaming" target="_blank" rel="noopener">helpful checker</a>. You can also see how much it costs to call or text another country from the UK.</p>\n<p>What destinations are included in Home From Home?</p>\n<ul>\n<li>Austria</li>\n<li>Azores</li>\n<li>Belgium</li>\n<li>Bulgaria</li>\n<li>Canary Islands</li>\n<li>Croatia</li>\n<li>Republic of Cyprus</li>\n<li>Czech Republic</li>\n<li>Denmark</li>\n<li>Estonia</li>\n<li>Finland</li>\n<li>France</li>\n<li>French Guiana</li>\n<li>Germany</li>\n<li>Gibraltar</li>\n<li>Greece</li>\n<li>Guadeloupe</li>\n<li>Guernsey</li>\n<li>Hungary</li>\n<li>Iceland</li>\n<li>Ireland (Republic of)</li>\n<li>Isle of Man</li>\n<li>Jersey</li>\n<li>Italy</li>\n<li>Latvia</li>\n<li>Liechtenstein</li>\n<li>Lithuania</li>\n<li>Luxembourg</li>\n<li>Madeira</li>\n<li>Malta</li>\n<li>Martinique</li>\n<li>Mayotte</li>\n<li>Monaco</li>\n<li>Netherlands</li>\n<li>Norway</li>\n<li>Poland</li>\n<li>Portugal</li>\n<li>Reunion</li>\n<li>Romania</li>\n<li>San Marino</li>\n<li>Slovakia</li>\n<li>Slovenia</li>\n<li>Spain</li>\n<li>St. Martin</li>\n<li>St. Barts</li>\n<li>Sweden</li>\n<li>Switzerland</li>\n<li>Vatican City</li>\n</ul>\n<p><a tabindex="0" href="https://www.tescomobile.com/why-tesco-mobile/award-winning-network/home-from-home">Find out more here</a></p></div>',frozenPrice:'<div data-enable-parallax="0" data-parallax-speed="0.5" data-background-images="{}" data-background-type="image" data-video-loop="true" data-video-play-only-visible="true" data-video-lazy-load="true" data-video-fallback-src="" data-element="inner" data-pb-style="A88VESI"><h2 data-content-type="heading" data-appearance="default" data-element="main">With Clubcard Prices, you’ll get fixed prices – so no mid-contract price increase&nbsp;</h2><div data-content-type="text" data-appearance="default" data-element="main"><p>Take out one of our exclusive Clubcard Price deals on a pay monthly phone or SIM, and we promise to freeze your basic monthly usage price for the length of your contract.</p>\n<p><span style="font-size: 14px;">A Clubcard number is required to get Clubcard Prices.&nbsp;<br></span></p>\n<p><a tabindex="0" href="https://www.tescomobile.com/shop/clubcard-prices"><span style="font-size: 14px;">View our full range of phones on Clubcard prices</span></a></p>\n<p><span style="font-size: 14px;">Learn more about <a tabindex="0" href="https://www.tescomobile.com/why-tesco-mobile/supermarket-value/clubcard-prices">Clubcard Prices&nbsp;</a></span></p>\n<p><span style="font-size: 14px;">Don’t have a Clubcard yet? It’s free, quick and easy to sign up. <a tabindex="0" href="https://www.tesco.com/account/register/en-GB?sc_cmp=ref*tm*stc*tm_clubcard_stamp_22_09_2022*tm_clubcard_register_page&amp;utm_source=tesco_mobile&amp;utm_medium=tm_clubcard_stamp_22_09_2022&amp;utm_campaign=tm_clubcard_register_page">Join Clubcard</a> to start saving now.<br><br></span></p>\n<p><span style="font-size: 16px;"><strong>How can I get Clubcard Prices?</strong></span></p>\n<p><span style="font-size: 14px;">To get Clubcard Prices on selected pay monthly deals, simply provide your Clubcard number when you’re checking out.<br><br></span><span style="font-size: 14px;">Current Clubcard Price deals available between 29th December 2025 and 1st February 2026.</span></p>\n<p>&nbsp;</p>\n<p><span style="font-size: 16px;"><strong>Where can I find my Clubcard number?</strong></span></p>\n<p><span style="font-size: 14px;"><span style="text-decoration: underline;">On your Clubcard</span>: It’s the long number on the front, below your name.</span></p>\n<p><span style="font-size: 14px;"><span style="text-decoration: underline;">On your key fob</span>: it’s on the back, near the QR code.</span></p>\n<p><span style="font-size: 14px;"><span style="text-decoration: underline;">In your Tesco app</span>: Select the Clubcard icon, and then ‘Tap to scan’ and your number will be displayed.</span></p>\n<p><span style="font-size: 14px;"><span style="text-decoration: underline;">On your Tesco Bank credit card</span>: It’s on the back, on the bottom left.</span></p></div></div>'},d=document.querySelector(n);if(!d||document.querySelector(".promo-section"))return;document.getElementById("promo-custom-sidebar")||document.body.insertAdjacentHTML("beforeend",`\n      <aside id="promo-custom-sidebar" class="modal-slide spotify cart-slider show-close _inner-scroll" tabindex="0" role="dialog" data-role="modal" data-type="slide">\n        <div class="modal-inner-wrap">\n          <header class="modal-header">\n            <button class="action-close" data-role="closeBtn" type="button"><span>Close</span></button>\n          </header>\n          <div id="modal-content-66" class="modal-content" data-role="content">\n            <div class="custom-sidebar-content">\n              <h2>Get 3 months free when you buy any iPhone.</h2>\n              <div class="custom-sidebar-accordion-section">\n                ${l(c)}\n              </div>\n            </div>\n          </div>\n        </div>\n      </aside>\n      <div class="promo-sidebar-backdrop" data-promo-backdrop style="display:none"></div>`),d.insertAdjacentHTML("afterend",'\n        <div class="promo-section">\n          <div class="promo-item">\n            <div class="promo-item-img-group"></div>\n            <div class="promo-item-content">Get 3 months free</div>\n          </div>\n          <div id="no-eu-roaming" class="promo-item">\n            <img class="promo-item-img" src="https://www.tescomobile.com/media/attribute/swatch/swatch_thumb/110x90/r/o/roaming_icon.png" alt="" loading="lazy">\n            <div class="promo-item-content">No EU roaming</div>\n          </div>\n          <div id="frozen-prices" class="promo-item">\n            <img class="promo-item-img" src="https://www.tescomobile.com/media/attribute/swatch/swatch_thumb/110x90/c/c/ccp-logo_3.png" alt="" loading="lazy">\n            <div class="promo-item-content">Frozen Prices</div>\n          </div>\n        </div>\n      '),t(o,(e=>{e.dataset.sidebarBound||(e.dataset.sidebarBound="1",e.addEventListener("click",(()=>r("apple"))))})),i(),t(e,(e=>{const t=[...e.querySelectorAll(".sale-type")].filter((e=>null!==e.offsetParent)).map((e=>{const t=e.querySelector("img"),n=e.querySelector(".promo-content");return{image:t?.src||null,text:n?.textContent.trim()||""}}));c.promoState=t,a(c)}));const u=document.querySelector(e);function p(e,t){const n=document.getElementById(e);n&&!n.dataset.sidebarBound&&(n.dataset.sidebarBound="1",n.style.cursor="pointer",n.addEventListener("click",(()=>r(t))))}console.log(u,"promoItemsSection"),u&&(u.style.display="none"),p("frozen-prices","frozenPrice"),p("no-eu-roaming","roaming"),document.body.addEventListener("click",(e=>{(e.target.closest("#promo-custom-sidebar .action-close")||e.target.hasAttribute("data-promo-backdrop"))&&s()})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&s()}))}function o(){const e=[{key:"browsing",name:"Browsing",icon:"click.png",rate:.015,unit:"hours",options:[{label:"Never",value:0},{label:"30 mins",value:30},{label:"1 hour",value:60},{label:"2 hours",value:120},{label:"4 hours",value:240}]},{key:"social",name:"Social",icon:"facebook.png",rate:.018,options:[{label:"Never",value:0},{label:"30 mins",value:30},{label:"1 hour",value:60},{label:"2 hours",value:120},{label:"4 hours",value:240}]},{key:"music",name:"Music",icon:"headphone.png",rate:.16,options:[{label:"Never",value:0},{label:"30 mins",value:30},{label:"1 hour",value:60},{label:"2 hours",value:120},{label:"4 hours",value:240}]},{key:"emails",name:"Emails",icon:"email.png",rate:.003,options:[{label:"0",value:0},{label:"20",value:20},{label:"100",value:100},{label:"200",value:200},{label:"300",value:300}]},{key:"apps",name:"Apps",icon:"apps.png",rate:.098,options:[{label:"0",value:0},{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"30",value:30}]}],t={browsing:0,social:0,music:0,emails:0,apps:0};function n(e){return`\n        <div class="data-calculator__context__row">\n          <div class="data-calculator__context__label">\n            <div class="data-calculator__context__label--layout">\n              <img class="data-calculator__context__icon"\n                  src="/etc.clientlibs/tescomobile/clientlibs/clientlib-site/resources/images/${e.icon}"\n                  alt="${e.name}">\n              <span class="data-calculator__context__name">${e.name}</span>\n            </div>\n          </div>\n\n          <div class="data-calculator__context__values button-group"\n              data-group="${e.key}"\n              data-value="${e.rate}">\n            ${function({key:e,options:t,unit:n}){return t.map((({label:t,value:o})=>`\n        <label>\n          <input type="radio"\n                 class="calc__input"\n                 name="${e}"\n                 value="${o}"\n                 ${n?`data-unit="${n}"`:""}>\n          <span class="button button--alpha">${t}</span>\n        </label>\n      `)).join("")}(e)}\n          </div>\n        </div>\n      `}function o(){const e=document.getElementById("data-cal-sidebar");if(!e||!e.classList.contains("_show"))return;const t=document.querySelector("[data-promo-backdrop]"),n=document.querySelector(".modals-wrapper");if(!e||!t||!n)return;const o=document.querySelector(".modals-overlay");o&&o.remove(),document.body.classList.remove("_has-modal"),e.classList.remove("_show")}document.body.insertAdjacentHTML("beforeend",`\n        <aside id="data-cal-sidebar"\n              class="modal-slide spotify cart-slider show-close _inner-scroll"\n              tabindex="0"\n              role="dialog"\n              data-role="modal"\n              data-type="slide">\n\n          <div class="modal-inner-wrap">\n            <header class="modal-header">\n              <button class="action-close" data-role="closeBtn" type="button">\n                <span>Close</span>\n              </button>\n            </header>\n\n            <div class="modal-content" data-role="content">\n              <div class="custom-data-calculator">\n                <section class="custom-data-calculator__header-container">\n                  <div>\n                    <h1>How much data do I need?</h1>\n                    <p class="subtitle">Select your typical <strong>daily internet usage</strong> from the options\n                      below</p>\n                    <p class="description">We’ll then estimate your monthly mobile data usage to help find the\n                      right tariff for you</p>\n                  </div>\n                </section>\n                <section class="custom-data-calculator__content">\n                  <div class="data-calculator__context">\n                    ${e.map(n).join("")}\n                  </div>\n              </div>\n            </div>\n          </div>\n        </aside>\n\n        <div class="promo-sidebar-backdrop" data-promo-backdrop style="display:none"></div>\n      `),document.body.addEventListener("click",(e=>{(e.target.closest(".modals-overlay")||e.target.closest("#data-cal-sidebar .action-close"))&&o()})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&o()}));document.getElementById("tariff-hint").addEventListener("click",(e=>{e.preventDefault(),function(){const e=document.getElementById("data-cal-sidebar"),t=document.querySelector("[data-promo-backdrop]"),n=document.querySelector(".modals-wrapper");e&&t&&n&&(document.querySelector(".modals-overlay")||n.insertAdjacentHTML("beforebegin",'<div class="modals-overlay" style="z-index: 901;"></div>'),document.body.classList.add("_has-modal"),e.classList.add("_show"),e.style.zIndex="902")}()}));document.querySelector(".data-calculator__context").addEventListener("click",(e=>{const n=e.target.closest("label");if(!n)return;const o=e.target.closest(".data-calculator__context__values");if(!o)return;const a=n.querySelector("input"),i=o.dataset.group,l=Number(o.dataset.value)*Number(a.value);t[i]=l.toFixed(2),o.querySelectorAll("span.button").forEach((e=>{e.classList.add("button--alpha")}));const r=n.querySelector("span.button");r&&r.classList.remove("button--alpha");const s=Object.values(t).reduce(((e,t)=>e+Number(t||0)),0),c=Math.ceil(s);let d=document.getElementById("data-estimation-value");if(!d){const e=document.querySelector(".estimation-section");if(e&&(d=e.querySelector("p"),!d)){const t=e.querySelector(".content-part");t&&(d=document.createElement("p"),d.id="data-estimation-value",t.appendChild(d))}}d&&(d.textContent=(s>.5?c:s>0?500:0)+(s>.5?"GB":"MB"),d.style.fontWeight=s>.5?"bold":"normal");const u=document.querySelector(".recommended-tariff-section");if(s>0&&u){const e=document.querySelectorAll('.option-type-tariff .field.choice input[type="radio"]'),t=s<.5?.5:c;let n=null,o=1/0;if(e.forEach((e=>{const a=e.nextElementSibling,i=a?a.textContent.trim().toLowerCase():"";let l=0;if(i.includes("unlimited"))l=1e4;else{const e=i.match(/(\d+(\.\d+)?)\s*(gb|mb)/i);if(e){const t=parseFloat(e[1]);l="gb"===e[3].toLowerCase()?t:t/1e3}}if(l>0){const a=Math.abs(l-t);a<o&&(o=a,n=e)}})),u.style.display="block",n){const e=n.nextElementSibling;if(e){const t=e.querySelector(".allowance"),n=e.querySelector(".price"),o=u.querySelector(".allowance"),a=u.querySelector(".price");t&&o&&(o.innerHTML=t.innerHTML),n&&a&&(a.innerHTML=n.innerHTML)}}}else u.style.display="none"}));const a=document.querySelector(".custom-data-calculator__content");if(!a)return void console.warn("Estimation target not found");a.insertAdjacentHTML("afterend",'\n    <div class="estimation-section-wrapper">\n      <div class="estimation-section">\n        <div class="text-part">\n          Estimated usage\n        </div>\n        <div class="content-part">\n          <p id="data-estimation-value">0MB</>\n        </div>\n      </div>\n      <p>\n        This is a rough guide, based on average data uses, and all amounts are rounded up. Your actual data usage may be higher. According to Ofcom, customers tend to increase their data usage each year. Think about future-proofing your data allowance so you don’t run out of data later down the line.\n      </p>\n    </div>\n    '),setTimeout((()=>{document.getElementById("data-estimation-value")}),100);document.querySelector(".estimation-section-wrapper").insertAdjacentHTML("afterend",'\n    <div class="recommended-tariff-section">\n      <div class="text-part">\n        <p>Recommended tariff</p>\n      </div>\n      <div class="field choice visible"><input type="radio" class="radio product bundle option change-container-classname" data-validate="{\'validate-one-required-by-name\':true}" name="bundle_option[301035]" data-selector="bundle_option[301035]" value="347667" checked="checked" aria-required="true"><label class="label" for="bundle-option-00000"><div class="allowance">50GB<span>data </span></div><div class="price"><div class="regular-price-wrapper">£40.49 <span>/month</span></div>\n        <span class="clubcard-price-wrapper">\n            <span class="clubcard-price-label">Clubcard Price</span>\n            <span class="clubcard-price-value"><span>£54.99</span>/month</span>\n      </span></div></label></div>\n      </div>\n    '),setTimeout((()=>{document.getElementById("recommended-tariff-value")}),100);document.querySelector(".recommended-tariff-section").insertAdjacentHTML("afterend",'\n      <div class="tariff-section">\n        <div class="tariff-cta-btn">\n          <button class="button tariff-btn">\n            Select Tariff\n        </button>\n        </div>\n      </div>\n    ');const i=document.querySelector(".tariff-btn");i&&i.addEventListener("click",(e=>{e.preventDefault();const n=Object.values(t).reduce(((e,t)=>e+Number(t||0)),0),a=Math.ceil(n),i=document.querySelectorAll('.option-type-tariff .field.choice input[type="radio"]'),l=n<.5?.5:a;let r=null,s=1/0;i.forEach((e=>{const t=e.nextElementSibling,n=t?t.textContent.trim().toLowerCase():"";let o=0;if(n.includes("unlimited"))o=1e4;else{const e=n.match(/(\d+(\.\d+)?)\s*(gb|mb)/i);if(e){const t=parseFloat(e[1]);o="gb"===e[3].toLowerCase()?t:t/1e3}}if(o>0){const t=Math.abs(o-l);t<s&&(s=t,r=e)}})),r&&(r.click(),r.scrollIntoView({behavior:"smooth",block:"center"}),o())}))}!function(e){if(document.body)return void e();const t=new MutationObserver((()=>{document.body&&(t.disconnect(),e())}));t.observe(document.documentElement,{childList:!0,subtree:!0})}((()=>{try{n()}catch(e){console.error("Error in Apple Promo Init:",e)}try{!function(){const e=document.querySelector(".product-type-switcher .swatch-attribute > .swatch-attribute-label"),t=document.querySelector(".swatch-attribute-options");if(!e||!t)return;if(document.querySelector(".payment-select-wrapper"))return;const n=[...t.querySelectorAll(".swatch-option-item")].map((e=>({label:e.querySelector("span")?.textContent.trim(),value:e.dataset.name,el:e}))),o=t.querySelector(".swatch-option-item.selected span")?.textContent.trim(),a=`\n    <div class="payment-select-wrapper">\n      <select name="payment-select" class="payment-select">\n        ${n.map((e=>`\n          <option \n            value="${e.value}" \n            ${e.label===o?"selected":""}\n          >\n            ${e.label}\n          </option>\n        `)).join("")}\n      </select>\n    </div>\n  `;e.insertAdjacentHTML("afterend",a),document.querySelector(".payment-select").addEventListener("change",(e=>{const t=e.target.value,o=n.find((e=>e.value===t))?.el;o&&o.click()})),t.style.display="none";const i=document.getElementById("tm-deal-device-wrapper");i&&function(e,t){const n=e.firstElementChild;if(n)return void t(n);const o=new MutationObserver((()=>{const n=e.firstElementChild;n&&(o.disconnect(),t(n))}));o.observe(e,{childList:!0})}(i,(e=>{const t=e.querySelectorAll(".swatch-attribute");let n=null,o=null;t.forEach((e=>{const t=e.querySelector(".swatch-attribute-label")?.textContent.trim();"Colour"===t||"Color"===t?n=e:"Storage"===t&&(o=e)}));const a=n?[...n.querySelectorAll(".swatch-option")]:[],i=o?[...o.querySelectorAll(".swatch-option")]:[],l=a.map(((e,t)=>{const n=e.querySelector(".swatch-color"),o=n?n.style.backgroundColor||getComputedStyle(n).backgroundColor:"",a=e.querySelector("span:not(.swatch-color)")?.textContent.trim()||e.textContent.trim();return{element:e,originalIndex:t,bgColor:o,label:a}})).filter((({element:e})=>!e.classList.contains("disabled"))),r=i.map(((e,t)=>({element:e,originalIndex:t,label:e.textContent.trim()}))).filter((({element:e})=>!e.classList.contains("disabled"))),s=`\n        <div class="custom-color-storage-container">\n          <div class="custom-color">\n            <div class="custom-color-title">Colour(${l.length||0})</div>\n            <div class="custom-select-ui" id="custom-color-select">\n              <div class="custom-select-selected" style="height: auto;">\n                ${l.filter((({element:e})=>e.classList.contains("selected"))).map((e=>`\n                  <span class="selected-color-dot" style="background: ${e.bgColor}"></span>\n                  <span class="selected-label">${e.label}</span>\n                `)).join("")}\n              </div>\n              <div class="custom-select-options">\n                ${l.map((e=>`\n                  <div class="custom-select-option ${e.element.classList.contains("selected")?"selected":""}" data-value="${e.originalIndex}">\n                    <span class="color-dot" style="background: ${e.bgColor}"></span>\n                    <span class="option-label">${e.label}</span>\n                  </div>\n                `)).join("")}\n              </div>\n            </div>\n          </div>\n          <div class="custom-storage">\n            <div class="custom-storage-title">Storage(${r.length||0})</div>\n            <select name="storage-select" class="custom-storage-options">\n              ${r.map((({element:e,originalIndex:t})=>`\n                <option value="${t}" ${e.classList.contains("selected")?"selected":""}>\n                  ${e.textContent.trim()}\n                </option>\n              `)).join("")}\n            </select>\n          </div>\n        </div>\n      `;e.insertAdjacentHTML("beforebegin",s);const c=document.getElementById("custom-color-select"),d=document.querySelector(".custom-storage-options");function u(){const e=a.map(((e,t)=>{const n=e.querySelector(".swatch-color"),o=n?n.style.backgroundColor||getComputedStyle(n).backgroundColor:"",a=e.querySelector("span:not(.swatch-color)")?.textContent.trim()||e.textContent.trim();return{element:e,originalIndex:t,bgColor:o,label:a}})).filter((({element:e})=>!e.classList.contains("disabled"))),t=c.querySelector(".custom-select-options"),n=document.querySelector(".custom-color-title");n&&(n.textContent=`Colour(${e.length})`),t.innerHTML=e.map((e=>`\n          <div class="custom-select-option ${e.element.classList.contains("selected")?"selected":""}" data-value="${e.originalIndex}">\n            <span class="color-dot" style="background: ${e.bgColor}"></span>\n            <span class="option-label">${e.label}</span>\n          </div>\n        `)).join("");const o=c.querySelector(".custom-select-selected"),l=e.find((({element:e})=>e.classList.contains("selected")));l&&(o.innerHTML=`\n            <span class="selected-color-dot" style="background: ${l.bgColor}"></span>\n            <span class="selected-label">${l.label}</span>\n          `);const r=i.map(((e,t)=>({element:e,originalIndex:t}))).filter((({element:e})=>!e.classList.contains("disabled"))),s=document.querySelector(".custom-storage-title");s&&(s.textContent=`Storage(${r.length})`),d.innerHTML=r.map((({element:e,originalIndex:t})=>`\n          <option value="${t}" ${e.classList.contains("selected")?"selected":""}>\n            ${e.textContent.trim()}\n          </option>\n        `)).join("")}c&&(c.querySelector(".custom-select-selected").addEventListener("click",(()=>{c.classList.toggle("_open")})),c.addEventListener("click",(e=>{const t=e.target.closest(".custom-select-option");if(t){const e=parseInt(t.dataset.value,10),n=a[e];n&&(n.click(),c.classList.remove("_open"),setTimeout((()=>u()),150))}})),document.addEventListener("click",(e=>{c.contains(e.target)||c.classList.remove("_open")}))),d&&d.addEventListener("change",(e=>{const t=parseInt(e.target.value,10),n=i[t];n&&(n.click(),setTimeout((()=>u()),200))})),e.style.display="none"}))}()}catch(e){console.error("Error in New Task Init:",e)}try{e((()=>document.querySelector(".custom-cc-wrapper")&&document.querySelector(".cc-savings")&&document.querySelector(".tm-option-wrapper.option-type-tariff")),(()=>{const e=document.querySelector(".custom-cc-wrapper");if(e){const t=e.querySelector(".cc-savings");document.querySelector(".custom-cc-savings")||(t.classList.add("custom-cc-savings"),document.querySelector(".tm-option-wrapper.option-type-tariff").insertAdjacentElement("beforebegin",t)),e.classList.contains("new-cc-wrapper")||(e.classList.add("new-cc-wrapper"),e.querySelectorAll(".field .label .price .regular-price-wrapper > span").forEach((e=>{e.innerText="/month"})),e.querySelectorAll(".field .label .price .clubcard-price-wrapper .clubcard-price-value").forEach((e=>{e.innerHTML=e.innerHTML.replace(" a month","/month")})))}})),e((()=>document.querySelector(".nested.options-list")&&document.querySelector(".custom-cc-wrapper")),(()=>{const e=document.querySelector(".nested.options-list"),t=e.querySelector(".custom-cc-wrapper"),n=e.querySelectorAll(".field.choice");t.insertAdjacentHTML("afterend",'<div class="new-grid-section"></div>');const o=e.querySelector(".new-grid-section");n.forEach((e=>{o.appendChild(e)})),o.querySelectorAll(".field .label .price .regular-price-wrapper > span").forEach((e=>{e.innerText="/month"})),o.querySelectorAll(".field .label .price .clubcard-price-wrapper .clubcard-price-value").forEach((e=>{e.innerHTML=e.innerHTML.replace(" a month","/month")}))})),e((()=>document.querySelector(".control .nested.options-list")),(()=>{const e=document.querySelector(".control .nested.options-list"),t=e.querySelectorAll(".field.choice");e.insertAdjacentHTML("afterend",'<div class="new-grid-section"></div>');const n=e.nextElementSibling;t.forEach((e=>{n.appendChild(e)}))}))}catch(e){console.error("Error in New Task Init:",e)}try{o()}catch(e){console.error("Error in New Task Init:",e)}}))})();
